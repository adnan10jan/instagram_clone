import React, { useState } from "react";
import { useDispatch } from "react-redux";
import { addPost } from "../actions/postActions";
import PostList from "./PostList";
import "../components/Css/SignUp.css";
const PostForm = () => {
  const [caption, setCaption] = useState("");
  const [image, setImage] = useState(null); // New state for image
  const dispatch = useDispatch();

  const handleSubmit = (e) => {
    e.preventDefault();

    if (caption.trim() || image) {
      dispatch(addPost({ caption, image })); // Dispatch caption and image
      setCaption("");
      setImage(null);
    }
  };

  const handleImageChange = (e) => {
    // Update image state upon file selection
    setImage(e.target.files[0]);
    console.log(e.target.files[0]); // Log the selected image file
  };

  return (
    <div>

        <nav className="navbar">
        <img src="data:image/jpeg;base64,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" alt="Instagram Logo" className="logo" />
      </nav>
      <form onSubmit={handleSubmit} className="post__list">
        <input
          type="text"
          placeholder="Add a caption..."
          value={caption}
          onChange={(e) => setCaption(e.target.value)}
        />
        <input
          className="image__file"
          type="file"
          accept="image/*" // Accept only image files
          onChange={handleImageChange} // Set image state on file selection
        />
        <div className="button__cs__form">
          <button type="submit">Add Post</button>
        </div>
      </form>
      <PostList />
    </div>
  );
};

export default PostForm;
